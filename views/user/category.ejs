<%- include ('../layouts/header.ejs') %>

    <!-- search stle -->
    <style>
        .search-results-container {
            position: absolute;
            top: 100%;
            left: -330px;
            right: 0;
            background: white;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            z-index: 1000;
            max-height: 400px;
            overflow-y: auto;
        }

        .search-result-item {
            display: flex;
            padding: 10px;
            border-bottom: 1px solid #eee;
        }

        .search-result-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .search-result-info {
            flex: 1;
        }

        .search-result-info h3 {
            margin: 0;
            font-size: 16px;
        }

        .search-result-info p {
            margin: 5px 0;
            font-size: 14px;
            color: #666;
        }

        .search-result-price {
            font-weight: bold;
            color: #e44d26;
        }
    </style>
    <style>
        .product-price {
            font-family: Arial, sans-serif;
            margin: 10px 0;
        }

        .price-wrapper {
            display: flex;
            align-items: center;
            flex-wrap: wrap;
            gap: 10px;
        }

        .original-price {
            text-decoration: line-through;
            color: #999;
            margin-right: 5px;
        }

        .discounted-price,
        .regular-price {
            color: #c66d63;
            font-weight: bold;
            font-size: 1.1em;
        }

        .discount-percentage {
            color: #27ae60;
            font-size: 0.9em;
        }

        @media (max-width: 768px) {
            .price-wrapper {
                flex-direction: column;
                align-items: flex-start;
            }
        }
    </style>
    <style>
        .product-label {
            display: inline-block;
            padding: 4px 10px;
            font-size: 12px;
            font-weight: 600;
            color: #fff;
            border-radius: 8px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 5px;
            opacity: 0.9;
            transition: all 0.3s ease;
        }

        .product-label.label-sale {
            background-color: #ff4d4f;
            border: 1px solid #d9363e;
        }

        .product-label.label-out-of-stock {
            background-color: #ad6666;
            border: 1px solid #993333;
        }

        .product-label.label-in-stock {
            background-color: #59875a;
            border: 1px solid #388E3C;
        }

        .product-label.label-limited-stock {
            background-color: #a68953;
            border: 1px solid #976f3e;
        }

        .product-label:hover {
            opacity: 1;
            transform: scale(1.05);
        }

        .product-label {
            box-shadow: 0px 2px 5px rgba(0, 0, 0, 0.1);
        }
    </style>
    <div class="page-wrapper">
        <header class="header">

            <div class="header-top">
                <div class="container">
                    <div class="header-left col-lg-7">
                        <nav aria-label="breadcrumb" class="breadcrumb-nav border-0 mb-0">
                            <div class="container breadcrumbs">
                                <ol class="breadcrumb">

                                    <!-- Current page breadcrumb without link -->
                                    <li class="breadcrumb-item active" aria-current="page">
                                        <% if (user) { %>
                                    <li>
                                        <a href="userprofile"><i class="icon-user"></i>
                                            <%= user.name || user.displayName %>
                                        </a>
                                    </li>
                                    <% } else { %>
                                        <li>
                                            <a href="/login"><i class="icon-user"></i>Login</a>
                                        </li>
                                        <% } %>
                                            </li>
                                </ol>
                            </div>
                            <!-- End .container -->
                        </nav>
                        <!-- End .breadcrumb-nav -->
                    </div>

                    <!-- End .header-right -->
                </div>
                <!-- End .container -->

            </div>
            <div class="header-bottom sticky-header">
                <div class="container">
                    <div class="header-left">
                        <button class="mobile-menu-toggler">
                            <span class="sr-only">Toggle mobile menu</span>
                            <i class="icon-bars"></i>
                        </button>

                        <img src="/images/ww logo black.jpg" alt="Molla Logo"
                            style="width:72px; height:62px; cursor:pointer;">

                    </div>
                    <div class="header-center">
                        <nav class="main-nav">
                            <ul class="menu sf-arrows">
                                <li class="megamenu-container ">
                                    <a href="home" class="sf-with-ul">Home</a>

                                </li>
                                <li class="megamenu-container active">
                                    <a href="category" class="sf-with-ul ">Shoping</a>
                                </li>

                                <li>
                                    <a href="#" class="sf-with-ul">Pages</a>

                                    <ul>
                                        <li>
                                            <a href="/aboutus">About Us</a>

                                        </li>
                                        <li>
                                            <a href="/aboutus">Contact Us</a>

                                        </li>
                                        <li><a href="/category">Shoping</a></li>
                                        <li><a href="/userprofile">My Account</a></li>
                                        <li><a href="/profileOrders">My Orders</a></li>
                                        <li><a href="/wallet">My Wallet</a></li>

                                        <li><a href="/cart">Cart</a></li>
                                        <li><a href="/wishlist">Wishlist</a></li>
                                        <li><a href="/login">Login</a></li>
                                    </ul>
                                </li>
                            </ul><!-- End .menu -->
                        </nav><!-- End .main-nav -->
                    </div><!-- End .header-left -->

                    <div class="header-right">
                        <div class="header-search">
                            <a href="#" class="search-toggle" role="button"><i class="icon-search"></i></a>
                            <form id="searchForm" action="#" method="get">
                                <div class="header-search-wrapper">
                                    <label for="q" class="sr-only">Search</label>
                                    <input type="search" class="form-control" name="q" id="searchInput"
                                        placeholder="Search in..." required>
                                </div>
                            </form>
                            <div id="searchResults" class="search-results-container"></div>
                        </div>

                        <a href="wishlist" class="wishlist-link">
                            <i class="icon-heart-o"></i>
                        </a>

                        <div class="dropdown cart-dropdown">
                            <a href="/cart" class="dropdown-toggle" role="button">
                                <i class="icon-shopping-cart"></i>

                            </a>
                        </div>
                    </div><!-- End .header-right -->
                </div><!-- End .container -->
            </div><!-- End .header-bottom -->
        </header><!-- End .header -->

        <main class="main">
            <div class="page-header text-center" style="background-color:rgb(51, 41, 41);">
                <div class="container">
                    <h1 class="page-title">Shoping Space <span>Categories and Products</span></h1>
                </div><!-- End .container -->
            </div>

            <style>
                .page-header .page-title {
                    color: white;
                }
            </style>
            <nav aria-label="breadcrumb" class="breadcrumb-nav mb-2">
                <div class="container">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item"><a href="/home">Home</a></li>
                        <li class="breadcrumb-item active"><a href="#">Shop</a></li>
                    </ol>
                </div><!-- End .container -->
            </nav><!-- End .breadcrumb-nav -->

            <div class="page-content">
                <div class="container">
                    <div class="row">
                        <div class="col-lg-9">
                            <div class="toolbox">
                            </div><!-- End .toolbox -->

                            <div class="products mb-3">
                                <div class="row justify-content-center">
                                    <% if (typeof products !=='undefined' && products.length> 0) { %>
                                        <% products.forEach(product=> { %>
                                            <div class="col-6 col-md-4 col-lg-4">
                                                <div class="product product-7 text-center">
                                                    <figure class="product-media">
                                                        <% if (product.productPrice < product.originalPrice) { %>
                                                            <span class="product-label label-sale">Sale</span>
                                                            <% } else { %>
                                                                <% if (product.stock===0) { %>
                                                                    <span class="product-label label-out-of-stock">Out
                                                                        of Stock</span>
                                                                    <% } else if (product.stock <=5) { %>
                                                                        <span
                                                                            class="product-label label-limited-stock">Limited
                                                                            Stock</span>
                                                                        <% } else if (product.stock> 5) { %>
                                                                            <span
                                                                                class="product-label label-in-stock">In
                                                                                Stock</span>
                                                                            <% } %>
                                                                                <% } %>
                                                                                    <a
                                                                                        href="product/<%= product._id %>">
                                                                                        <% if
                                                                                            (product.productImages.length>
                                                                                            0) { %>
                                                                                            <img src="/images/<%= product.productImages[0] %>"
                                                                                                alt="<%= product.productTitle %>"
                                                                                                class="product-image">
                                                                                            <% } else { %>
                                                                                                <img src="/path/to/default/image.jpg"
                                                                                                    alt="No Image"
                                                                                                    class="product-image">
                                                                                                <% } %>
                                                                                    </a>

                                                                                    <div
                                                                                        class="product-action-vertical">
                                                                                        <!-- <a href="#"
                                                                                            class="btn-product-icon btn-wishlist btn-expandable"><span>add
                                                                                                to wishlist</span></a> -->
                                                                                        <a href="#"
                                                                                            class="btn-product-icon btn-wishlist btn-expandable"
                                                                                            data-product-id="<%= product._id %>"
                                                                                            title="Wishlist">
                                                                                            <span>Add to Wishlist</span>
                                                                                        </a>

                                                                                        <a href="product/<%= product._id %>"
                                                                                            class="btn-product-icon btn-quickview"
                                                                                            title="Quick view"><span>Quick
                                                                                                view</span></a>
                                                                                        <a href="#"
                                                                                            class="btn-product-icon btn-compare"
                                                                                            title="Compare"><span>Compare</span></a>
                                                                                    </div>

                                                                                    <div class="product-action">

                                                                                        <a href="#"
                                                                                            class="btn-product btn-cart"
                                                                                            data-product-id="<%= product._id %>"
                                                                                            data-product-stock="<%= product.stock %>">
                                                                                            <span>add to cart</span>
                                                                                        </a>

                                                                                    </div>

                                                    </figure>

                                                    <div class="product-body">
                                                        <div class="product-cat">
                                                            <a href="#">
                                                                <%= product.category ? product.category.name
                                                                    : 'No Category' %>
                                                            </a>
                                                        </div>
                                                        <h3 class="product-title"><a href="product/<%= product._id %>">
                                                                <%= product.productTitle %>
                                                            </a></h3>
                                                        <div class="product-price">
                                                            <% if (product.appliedOffer) { %>
                                                                <div class="price-wrapper">
                                                                    <span class="original-price">₹<%=
                                                                            product.productPrice.toFixed(2) %></span>
                                                                    <span class="discounted-price">₹<%=
                                                                            product.discountedPrice %></span>
                                                                    <span class="discount-percentage">
                                                                        <%= product.appliedOffer.discount %>% off
                                                                    </span>
                                                                </div>
                                                                <% } else { %>
                                                                    <span class="regular-price">₹<%=
                                                                            product.productPrice.toFixed(2) %></span>
                                                                    <% } %>
                                                        </div>


                                                        <% if (product.productImages.length> 1) { %>
                                                            <div class="product-nav product-nav-thumbs">
                                                                <% product.productImages.slice(0, 3).forEach((image,
                                                                    index)=> { %>
                                                                    <a href="#"
                                                                        class="<%= index === 0 ? 'active' : '' %>">
                                                                        <img src="/images/<%= image %>"
                                                                            alt="product desc">
                                                                    </a>
                                                                    <% }); %>
                                                            </div>
                                                            <% } %>
                                                    </div>
                                                </div>
                                            </div>
                                            <% }); %>
                                                <% } else { %>
                                                    <p>No products available.</p>
                                                    <% } %>
                                </div>
                            </div>
                            <!-- pagination -->


                            <!-- pagination -->
                            <nav aria-label="Page navigation">
                                <ul class="pagination justify-content-center">
                                    <li class="page-item <%= currentPage == 1 ? 'disabled' : '' %>">
                                        <a class="page-link page-link-prev"
                                            href="?<%= new URLSearchParams({...queryParams, page: currentPage - 1}).toString() %>"
                                            aria-label="Previous">
                                            <span aria-hidden="true"><i class="icon-long-arrow-left"></i></span>Prev
                                        </a>
                                    </li>
                                    <% for (let i=1; i <=totalPages; i++) { %>
                                        <li class="page-item <%= currentPage == i ? 'active' : '' %>">
                                            <a class="page-link"
                                                href="?<%= new URLSearchParams({...queryParams, page: i}).toString() %>">
                                                <%= i %>
                                            </a>
                                        </li>
                                        <% } %>
                                            <li class="page-item-total">of <%= totalPages %>
                                            </li>
                                            <li class="page-item <%= currentPage == totalPages ? 'disabled' : '' %>">
                                                <a class="page-link page-link-next"
                                                    href="?<%= new URLSearchParams({...queryParams, page: currentPage + 1}).toString() %>"
                                                    aria-label="Next">
                                                    Next <span aria-hidden="true"><i
                                                            class="icon-long-arrow-right"></i></span>
                                                </a>
                                            </li>
                                </ul>
                            </nav>
                        </div>


                        <aside class="col-lg-3 order-lg-first">
                            <div class="sidebar sidebar-shop">
                                <form id="filterForm" method="GET">
                                    <div class="widget widget-clean">
                                        <label>Filters:</label>
                                        <a href="/category" class="sidebar-filter-clear">Clean All</a>
                                    </div>

                                    <!-- Category Widget -->
                                    <div class="widget widget-collapsible">
                                        <h3 class="widget-title">
                                            <a data-toggle="collapse" href="#widget-1" role="button"
                                                aria-expanded="true" aria-controls="widget-1">
                                                Category
                                            </a>
                                        </h3>
                                        <div class="collapse show" id="widget-1">
                                            <div class="widget-body">
                                                <div class="filter-items filter-items-count">
                                                    <% if (categories && categories.length> 0) { %>
                                                        <% categories.forEach((category, index)=> { %>
                                                            <div class="filter-item">
                                                                <div class="custom-control custom-checkbox">
                                                                    <input type="checkbox" class="custom-control-input"
                                                                        id="cat-<%= category._id %>" name="category"
                                                                        value="<%= category._id %>" <%=currentFilters &&
                                                                        currentFilters.category &&
                                                                        currentFilters.category.includes(category._id.toString())
                                                                        ? 'checked' : '' %>>
                                                                    <label class="custom-control-label"
                                                                        for="cat-<%= category._id %>">
                                                                        <%= category.name %>
                                                                    </label>
                                                                </div>
                                                                <span class="item-count">
                                                                    <%= category.productCount %>
                                                                </span>
                                                            </div>
                                                            <% }); %>
                                                                <% } else { %>
                                                                    <div class="filter-item">
                                                                        <p>No categories available.</p>
                                                                    </div>
                                                                    <% } %>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Sort Widget -->
                                    <div class="widget widget-collapsible">
                                        <h3 class="widget-title">
                                            <a data-toggle="collapse" href="#widget-sort" role="button"
                                                aria-expanded="true" aria-controls="widget-sort">
                                                Sort By
                                            </a>
                                        </h3>
                                        <div class="collapse show" id="widget-sort">
                                            <div class="widget-body">
                                                <div class="filter-items">
                                                    <div class="filter-item">
                                                        <div class="custom-control custom-radio">
                                                            <input type="radio" class="custom-control-input"
                                                                id="sort-price-low-high" name="priceSort" value="asc"
                                                                <%=currentFilters.priceSort==='asc' ? 'checked' : '' %>>
                                                            <label class="custom-control-label"
                                                                for="sort-price-low-high">Price: Low to High</label>
                                                        </div>
                                                    </div>
                                                    <div class="filter-item">
                                                        <div class="custom-control custom-radio">
                                                            <input type="radio" class="custom-control-input"
                                                                id="sort-price-high-low" name="priceSort" value="desc"
                                                                <%=currentFilters.priceSort==='desc' ? 'checked' : ''
                                                                %>>
                                                            <label class="custom-control-label"
                                                                for="sort-price-high-low">Price: High to Low</label>
                                                        </div>
                                                    </div>
                                                    <div class="filter-item">
                                                        <div class="custom-control custom-radio">
                                                            <input type="radio" class="custom-control-input"
                                                                id="sort-product-a-z" name="sort" value="asc"
                                                                <%=currentFilters.sort==='asc' ? 'checked' : '' %>>
                                                            <label class="custom-control-label"
                                                                for="sort-product-a-z">Name: A to Z</label>
                                                        </div>
                                                    </div>
                                                    <div class="filter-item">
                                                        <div class="custom-control custom-radio">
                                                            <input type="radio" class="custom-control-input"
                                                                id="sort-product-z-a" name="sort" value="desc"
                                                                <%=currentFilters.sort==='desc' ? 'checked' : '' %>>
                                                            <label class="custom-control-label"
                                                                for="sort-product-z-a">Name: Z to A</label>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </aside>


                    </div><!-- End .row -->
                </div><!-- End .container -->
            </div><!-- End .page-content -->
        </main><!-- End .main -->

        <footer class="footer footer-2">
            <div class="footer-middle">
                <div class="container">
                    <div class="row">
                        <div class="col-sm-12 col-lg-6">
                            <div class="widget widget-about">

                                <p>Thanks for visiting Wrist Wise, where you can find a wide range of stylish
                                    and high-quality watches for every occasion. Whether you're looking for a sleek,
                                    modern design or a classic timepiece, we've got something for everyone. Our watches
                                    are priced affordably, making them accessible to all, without compromising on
                                    quality. Browse through our
                                    collection today and find the perfect watch to match your style!</p>

                                <div class="widget-about-info">
                                    <div class="row">
                                        <div class="col-sm-6 col-md-4">
                                            <span class="widget-about-title">Got Question? Call us 24/7</span>
                                            <a href="tel:123456789">+91 8086 86 2233</a>
                                        </div><!-- End .col-sm-6 -->

                                    </div><!-- End .row -->
                                </div><!-- End .widget-about-info -->
                            </div><!-- End .widget about-widget -->
                        </div><!-- End .col-sm-12 col-lg-3 -->

                        <div class="col-sm-4 col-lg-2">
                            <div class="widget">
                                <h4 class="widget-title">Information</h4><!-- End .widget-title -->

                                <ul class="widget-list">
                                    <li><a href="/aboutus">About Us</a></li>
                                    <li><a href="/aboutus">Who we are</a></li>
                                    <li><a href="/aboutus">FAQ</a></li>
                                    <li><a href="/aboutus">Contact us</a></li>
                                    <li><a href="/login">Log in</a></li>
                                </ul><!-- End .widget-list -->
                            </div><!-- End .widget -->
                        </div><!-- End .col-sm-4 col-lg-3 -->

                        <div class="col-sm-4 col-lg-2">
                            <div class="widget">
                                <h4 class="widget-title">Customer Service</h4><!-- End .widget-title -->

                                <ul class="widget-list">
                                    <li><a href="/aboutus">Payment Methods</a></li>
                                    <li><a href="/aboutus">Money-back guarantee!</a></li>
                                    <li><a href="/aboutus">Returns</a></li>
                                    <li><a href="/aboutus">Shipping</a></li>
                                    <li><a href="/aboutus">Terms and conditions</a></li>
                                    <li><a href="/aboutus">Privacy Policy</a></li>
                                </ul><!-- End .widget-list -->
                            </div><!-- End .widget -->
                        </div><!-- End .col-sm-4 col-lg-3 -->

                        <div class="col-sm-4 col-lg-2">
                            <div class="widget">
                                <h4 class="widget-title">My Account</h4><!-- End .widget-title -->

                                <ul class="widget-list">
                                    <li><a href="/login">Sign In</a></li>
                                    <li><a href="/cart">View Cart</a></li>
                                    <li><a href="/wishlist">My Wishlist</a></li>
                                    <li><a href="/profileOrders">Track My Order</a></li>
                                    <li><a href="/aboutus">Contact Us</a></li>
                                </ul><!-- End .widget-list -->
                            </div><!-- End .widget -->
                        </div><!-- End .col-sm-64 col-lg-3 -->
                    </div><!-- End .row -->
                </div><!-- End .container -->
            </div><!-- End .footer-middle -->

            <div class="footer-bottom">
                <div class="container">
                    <p class="footer-copyright">Copyright © 2024 Wrist Wise. All Rights Reserved.</p>


                    <div class="social-icons social-icons-color">
                        <span class="social-label">Social Media</span>

                        <a href="http://Wa.me/+918086862233" class="social-icon social-whatsapp" title="WhatsApp"
                            target="_blank"><i class="icon-whatsapp"></i></a>
                        <a href="https://www.instagram.com/rishhaadh?igsh=MTZzZjh0dnQ2Yzl4eA%3D%3D&utm_source=qr"
                            class="social-icon social-instagram" title="Instagram" target="_blank"><i
                                class="icon-instagram"></i></a>


                    </div><!-- End .soial-icons -->
                </div><!-- End .container -->
            </div><!-- End .footer-bottom -->
        </footer><!-- End .footer -->

    </div><!-- End .page-wrapper -->
    <button id="scroll-top" title="Back to Top"><i class="icon-arrow-up"></i></button>


    <!-- Sort & Filter -->
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const filterForm = document.getElementById('filterForm');
            const filterInputs = filterForm.querySelectorAll('input[type="checkbox"], input[type="radio"]');

            filterInputs.forEach(input => {
                input.addEventListener('change', function () {
                    if (this.name === 'sort' || this.name === 'priceSort') {
                        filterForm.querySelectorAll('input[name="sort"], input[name="priceSort"]').forEach(sortInput => {
                            if (sortInput !== this) {
                                sortInput.checked = false;
                            }
                        });
                    }
                    filterForm.submit();
                });
            });

            const cleanAllLink = document.querySelector('.sidebar-filter-clear');
            cleanAllLink.addEventListener('click', function (e) {
                e.preventDefault();
                filterInputs.forEach(input => {
                    input.checked = false;
                });
                filterForm.submit();
            });
        });
    </script>

    <!-- search js -->
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const searchForm = document.getElementById('searchForm');
            const searchInput = document.getElementById('searchInput');
            const searchResults = document.getElementById('searchResults');

            let debounceTimer;

            searchInput.addEventListener('input', function () {
                clearTimeout(debounceTimer);
                debounceTimer = setTimeout(() => {
                    const query = this.value.trim();
                    if (query.length > 2) {
                        fetchSearchResults(query);
                    } else {
                        searchResults.innerHTML = '';
                    }
                }, 300);
            });

            searchForm.addEventListener('submit', function (e) {
                e.preventDefault();
                const query = searchInput.value.trim();
                if (query) {
                    fetchSearchResults(query);
                }
            });

            function fetchSearchResults(query) {
                fetch(`/search?q=${encodeURIComponent(query)}`)
                    .then(response => response.json())
                    .then(data => {
                        displaySearchResults(data);
                    })
                    .catch(error => {
                        console.error('Error:', error);
                        searchResults.innerHTML = '<p>An error occurred while searching. Please try again.</p>';
                    });
            }

            function displaySearchResults(results) {
                if (results.length === 0) {
                    searchResults.innerHTML = '<p>No results found.</p>';
                    return;
                }

                const resultsHtml = results.map(product => `
<div class="search-result-item">
  <a class="product-gallery-item active" href="#"
     data-image="/images/${product.image}"
     data-zoom-image="/images/${product.image}">
    <img src="/images/${product.image}" alt="${product.name}" class="search-result-image">
  </a>
  <div class="search-result-info">
    <h3><a href="/product/${product.id}">${product.name}</a></h3>
    <p>${product.description.substring(0, 50)}...</p>
    <span class="search-result-price">$${product.price.toFixed(2)}</span>
  </div>
</div>
`).join('');

                searchResults.innerHTML = resultsHtml;
            }
        });

    </script>

    <!-- add to cart -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/toastify-js"></script>

    <script>
      
        $(document).ready(function () {
            $('.btn-cart').on('click', function (e) {
                e.preventDefault();
                const productId = $(this).data('product-id');
                const stock = $(this).data('product-stock'); 

                const quantityElement = $('#qty');
                const quantity = quantityElement.length ? parseInt(quantityElement.val(), 10) : 1;

                if (stock < 1) {
                    Toastify({
                        text: "Product is out of stock",
                        duration: 3000,
                        close: false,
                        gravity: "bottom",
                        position: "center",
                        backgroundColor: "#F44336",
                    }).showToast();
                    return; // Stop the process if stock is less than 1
                }

                $.ajax({
                    url: '/add-to-cart',
                    method: 'POST',
                    data: { productId: productId, quantity: quantity },
                    success: function (response) {
                        if (response.success) {
                            Toastify({
                                text: "Added product to cart",
                                duration: 3000,
                                close: false,
                                gravity: "bottom",
                                position: "center",
                                backgroundColor: "#4CAF50",
                            }).showToast();
                        }
                    },
                    error: function () {
                        Toastify({
                            text: "Please Login To Add Cart",
                            duration: 3000,
                            close: false,
                            gravity: "bottom",
                            position: "center",
                            backgroundColor: "#F44336",
                        }).showToast();
                    }
                });
            });
            $('.btn-wishlist').on('click', function (e) {
                e.preventDefault();
                const productId = $(this).data('product-id');

                $.ajax({
                    url: '/add-to-wishlist',
                    method: 'POST',
                    data: { productId: productId },
                    success: function (response) {
                        if (response.success) {
                            Toastify({
                                text: "Added product to wishlist",
                                duration: 3000,
                                close: false,
                                gravity: "bottom",
                                position: "center",
                                backgroundColor: "#4CAF50",
                            }).showToast();
                        }
                    },
                    error: function () {
                        Toastify({
                            text: "Please Login To Add To Wishlist",
                            duration: 3000,
                            close: false,
                            gravity: "bottom",
                            position: "center",
                            backgroundColor: "#F44336",
                        }).showToast();
                    }
                });
            });
        });
    </script>
    <!-- Plugins JS File -->
    <script src="/assets/js/jquery.min.js"></script>
    <script src="/assets/js/bootstrap.bundle.min.js"></script>
    <script src="/assets/js/jquery.hoverIntent.min.js"></script>
    <script src="/assets/js/jquery.waypoints.min.js"></script>
    <script src="/assets/js/superfish.min.js"></script>
    <script src="/assets/js/owl.carousel.min.js"></script>
    <script src="/assets/js/wNumb.js"></script>
    <script src="/assets/js/bootstrap-input-spinner.js"></script>
    <script src="/assets/js/jquery.magnific-popup.min.js"></script>
    <script src="/assets/js/nouislider.min.js"></script>
    <!-- Main JS File -->
    <script src="/assets/js/main.js"></script>

    <%- include ('../layouts/footer.ejs') %>